# üóÇÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Storage –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤

## –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å bucket –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí **Storage**
2. –ù–∞–∂–º–∏—Ç–µ **"New bucket"**
3. –í–≤–µ–¥–∏—Ç–µ:
   - **Name**: `avatars`
   - **Public bucket**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ (–¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–≤–∞—Ç–∞—Ä–∞–º)
4. –ù–∞–∂–º–∏—Ç–µ **"Create bucket"**

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ SQL Editor (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–û—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞:
```
supabase/storage/setup-avatars.sql
```

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:

```sql
-- –°–æ–∑–¥–∞–µ–º bucket (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)
INSERT INTO storage.buckets (id, name, public)
VALUES ('avatars', 'avatars', true)
ON CONFLICT (id) DO NOTHING;

-- –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è (–ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø)
CREATE POLICY "Public Access for avatars"
ON storage.objects FOR SELECT
USING (bucket_id = 'avatars');

-- –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ (–ø—É–±–ª–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
CREATE POLICY "Anyone can upload avatars"
ON storage.objects FOR INSERT
WITH CHECK (bucket_id = 'avatars');

-- –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
CREATE POLICY "Anyone can update avatars"
ON storage.objects FOR UPDATE
USING (bucket_id = 'avatars');

-- –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
CREATE POLICY "Anyone can delete avatars"
ON storage.objects FOR DELETE
USING (bucket_id = 'avatars');
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ UI

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Storage** ‚Üí **Policies**
2. –í—ã–±–µ—Ä–∏—Ç–µ bucket `avatars`
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –≤—Ä—É—á–Ω—É—é:
   - **SELECT**: `bucket_id = 'avatars'`
   - **INSERT**: `bucket_id = 'avatars'`
   - **UPDATE**: `bucket_id = 'avatars'`
   - **DELETE**: `bucket_id = 'avatars'`

---

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ Bucket `avatars` —Å–æ–∑–¥–∞–Ω
- ‚úÖ 4 –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —Å–æ–∑–¥–∞–Ω—ã

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–í Electron** (–ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è):
   - –ê–≤–∞—Ç–∞—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ `userData/avatars/`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª `crm://` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

2. **–í –±—Ä–∞—É–∑–µ—Ä–µ** (–≤–µ–±-–≤–µ—Ä—Å–∏—è):
   - –ê–≤–∞—Ç–∞—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Supabase Storage bucket `avatars`
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–µ URLs –∏–∑ Supabase
   - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Ñ–∞–π–ª–∞ –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Storage

---

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∞–≤–∞—Ç–∞—Ä—ã –≤ Supabase Storage, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏. –ù–æ –ø–æ–∫–∞ —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ - –Ω–æ–≤—ã–µ –∞–≤–∞—Ç–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ Storage –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞/–ø–æ–¥—Ä—è–¥—á–∏–∫–∞
3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –∞–≤–∞—Ç–∞—Ä
4. –ê–≤–∞—Ç–∞—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ Bucket —Å–æ–∑–¥–∞–Ω –∏ –ø—É–±–ª–∏—á–Ω—ã–π
- ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ö–ª—é—á–∏ Supabase —É–∫–∞–∑–∞–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Vercel

